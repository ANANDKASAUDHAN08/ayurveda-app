<!-- Emergency Contact Modal -->
<div class="modal-backdrop fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
    (click)="onBackdropClick($event)">
    <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto"
        (click)="$event.stopPropagation()">

        <!-- Header -->
        <div class="sticky top-0 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-t-3xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-user-plus text-xl"></i>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold">{{ contact ? 'Edit' : 'Add' }} Contact</h2>
                        <p class="text-emerald-100 text-sm">Emergency contact details</p>
                    </div>
                </div>
                <button (click)="onClose()"
                    class="w-10 h-10 rounded-full hover:bg-white/20 transition-colors flex items-center justify-center">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Form -->
        <form (ngSubmit)="onSave()" class="p-6 space-y-5">

            <!-- Name Field -->
            <div>
                <label class="block text-sm font-bold text-slate-700 mb-2">
                    <i class="fas fa-user text-emerald-600 mr-2"></i>Full Name *
                </label>
                <input type="text" [(ngModel)]="formData.name" name="name" required
                    class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-emerald-500 focus:outline-none transition-colors"
                    placeholder="Enter full name">
            </div>

            <!-- Phone Field -->
            <div>
                <label class="block text-sm font-bold text-slate-700 mb-2">
                    <i class="fas fa-phone text-emerald-600 mr-2"></i>Phone Number *
                </label>
                <input type="tel" [(ngModel)]="formData.phone_number" name="phone" required
                    class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-emerald-500 focus:outline-none transition-colors"
                    placeholder="+91 98765 43210">
            </div>

            <!-- Relationship Field -->
            <div>
                <label class="block text-sm font-bold text-slate-700 mb-2">
                    <i class="fas fa-heart text-emerald-600 mr-2"></i>Relationship
                </label>
                <select [(ngModel)]="formData.relationship" name="relationship"
                    class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-emerald-500 focus:outline-none transition-colors">
                    <option value="">Select relationship</option>
                    <option value="Parent">Parent</option>
                    <option value="Spouse">Spouse</option>
                    <option value="Sibling">Sibling</option>
                    <option value="Child">Child</option>
                    <option value="Friend">Friend</option>
                    <option value="Doctor">Doctor</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <!-- Primary Contact Checkbox -->
            <div class="flex items-center gap-3 p-4 bg-emerald-50 rounded-xl">
                <input type="checkbox" [(ngModel)]="formData.is_primary" name="is_primary" id="is_primary"
                    class="w-5 h-5 text-emerald-600 rounded focus:ring-emerald-500">
                <label for="is_primary" class="text-sm font-semibold text-slate-700 cursor-pointer">
                    <i class="fas fa-star text-emerald-600 mr-2"></i>Set as primary contact
                </label>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3 pt-4">
                <button type="button" (click)="onClose()"
                    class="flex-1 px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold rounded-xl transition-colors">
                    Cancel
                </button>
                <button type="submit"
                    class="flex-1 px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-bold rounded-xl transition-all shadow-lg hover:shadow-xl transform hover:scale-[1.02]">
                    <i class="fas fa-check mr-2"></i>{{ contact ? 'Update' : 'Add' }} Contact
                </button>
            </div>

        </form>

    </div>
</div>