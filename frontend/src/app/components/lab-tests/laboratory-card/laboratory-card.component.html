<div class="bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300 cursor-pointer group flex flex-col h-full"
    (click)="onOpenDetails()">
    <!-- Card Image/Header Placeholder -->
    <div class="h-24 sm:h-32 bg-gradient-to-br from-teal-500 to-emerald-600 flex items-center justify-center relative">
        <div
            class="w-12 h-12 sm:w-16 sm:h-16 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/30">
            <i class="fas fa-microscope text-xl sm:text-3xl text-white"></i>
        </div>
        <div *ngIf="lab.is_nabl_accredited"
            class="absolute top-2 right-2 sm:top-3 sm:right-3 px-1.5 py-0.5 sm:px-2 sm:py-1 bg-white text-emerald-700 rounded text-[8px] sm:text-[10px] font-bold shadow-sm">
            NABL
        </div>
    </div>

    <!-- Card Body -->
    <div class="p-3 sm:p-4 flex-grow">
        <div class="flex items-start justify-between mb-1 sm:mb-2">
            <span class="px-1.5 py-0.5 bg-slate-100 text-slate-600 rounded text-[9px] sm:text-[10px] font-bold">
                {{ lab.city }}
            </span>
            <div class="flex items-center gap-1" *ngIf="lab.distance">
                <i class="fas fa-map-marker-alt text-emerald-500 text-[9px] sm:text-[10px]"></i>
                <span class="text-[9px] sm:text-[10px] font-bold text-slate-500">{{ lab.distance.toFixed(1) }}</span>
            </div>
        </div>

        <h3
            class="text-sm sm:text-base font-bold text-slate-900 mb-1 group-hover:text-emerald-600 transition-colors line-clamp-1">
            {{ lab.name }}
        </h3>

        <p class="text-[10px] sm:text-xs text-slate-500 line-clamp-2 mb-2 sm:mb-3 h-7 sm:h-8">
            <i class="fas fa-location-dot mr-1"></i> {{ lab.address }}
        </p>

        <!-- Services Preview (Hidden on small mobile) -->
        <div class="flex flex-wrap gap-1 mb-2 overflow-hidden h-5">
            <span *ngFor="let service of getServices().slice(0, 2)" (click)="navigateToSpecialty($event, service)"
                [class.cursor-pointer]="isSpecialtyAvailable(service)"
                [class.hover:bg-emerald-100]="isSpecialtyAvailable(service)"
                [class.hover:text-emerald-800]="isSpecialtyAvailable(service)"
                class="px-1.5 py-0.5 bg-emerald-50 text-emerald-700 rounded text-[10px] font-medium transition-colors">
                {{ service }}
                <i *ngIf="isSpecialtyAvailable(service)"
                    class="fas fa-external-link-alt ml-0.5 text-[8px] opacity-70"></i>
            </span>
        </div>
    </div>

    <!-- Card Footer -->
    <div class="px-3 py-1.5 sm:p-4 bg-white border-t border-slate-50 mt-auto">
        <div class="flex items-center justify-between">
            <div class="text-[9px] sm:text-[10px] text-slate-400">
                <i class="fas fa-clock mr-1"></i> {{ lab.timings }}
            </div>
            <button
                class="hidden md:block py-1 sm:px-3 sm:py-1.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-[10px] sm:text-xs font-bold transition-all shadow-sm">
                Details
            </button>
        </div>
    </div>
</div>