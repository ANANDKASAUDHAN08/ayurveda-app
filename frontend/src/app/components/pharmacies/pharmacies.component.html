<app-mobile-location-bar class="md:hidden"></app-mobile-location-bar>

<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- Hero Section - 2 Column Layout -->
    <div class="bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 text-white relative overflow-hidden">
        <!-- Decorative Elements -->
        <div class="absolute inset-0 opacity-10">
            <div class="absolute top-0 left-0 w-72 h-72 bg-white rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 right-0 w-96 h-96 bg-white rounded-full blur-3xl"></div>
        </div>

        <div class="max-w-full mx-auto relative z-10 px-4 sm:px-6 md:px-0">
            <div class="grid md:grid-cols-2 gap-0">
                <!-- Left Column - Main Content -->
                <div class="px-4 pt-6 pb-2 md:px-8 md:py-8 flex flex-col justify-center text-center md:text-left">
                    <h1 class="text-2xl sm:text-4xl md:text-5xl font-extrabold tracking-tight mb-2 
                               bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-200">
                        Find Pharmacies Near You
                    </h1>
                    <p class="hidden md:block text-lg md:text-xl text-emerald-50 mb-4 leading-relaxed">
                        Discover trusted pharmacies with genuine medicines and fast home delivery. Quality healthcare
                        products at your doorstep.
                    </p>

                    <!-- Features Grid - Compact on Mobile -->
                    <div class="grid grid-cols-4 md:grid-cols-2 gap-2 md:gap-4 mb-4">
                        <div class="flex flex-col md:flex-row items-center gap-1 md:gap-3 text-center md:text-left">
                            <div
                                class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/20 flex items-center justify-center">
                                <i class="fas fa-pills text-sm md:text-xl"></i>
                            </div>
                            <div>
                                <p class="font-bold text-[10px] sm:text-xs md:text-lg leading-tight">
                                    {{pharmacies.length}}+</p>
                                <p
                                    class="text-[8px] sm:text-[10px] md:text-sm text-emerald-100 uppercase tracking-tighter md:normal-case md:tracking-normal">
                                    Pharm</p>
                            </div>
                        </div>
                        <div class="flex flex-col md:flex-row items-center gap-1 md:gap-3 text-center md:text-left">
                            <div
                                class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/20 flex items-center justify-center">
                                <i class="fas fa-truck text-sm md:text-xl"></i>
                            </div>
                            <div>
                                <p class="font-bold text-[10px] sm:text-xs md:text-lg leading-tight">Fast</p>
                                <p
                                    class="text-[8px] sm:text-[10px] md:text-sm text-emerald-100 uppercase tracking-tighter md:normal-case md:tracking-normal">
                                    Deliv</p>
                            </div>
                        </div>
                        <div class="flex flex-col md:flex-row items-center gap-1 md:gap-3 text-center md:text-left">
                            <div
                                class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/20 flex items-center justify-center">
                                <i class="fas fa-clock text-sm md:text-xl"></i>
                            </div>
                            <div>
                                <p class="font-bold text-[10px] sm:text-xs md:text-lg leading-tight">24/7</p>
                                <p
                                    class="text-[8px] sm:text-[10px] md:text-sm text-emerald-100 uppercase tracking-tighter md:normal-case md:tracking-normal">
                                    Avail</p>
                            </div>
                        </div>
                        <div class="flex flex-col md:flex-row items-center gap-1 md:gap-3 text-center md:text-left">
                            <div
                                class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/20 flex items-center justify-center">
                                <i class="fas fa-shield-alt text-sm md:text-xl"></i>
                            </div>
                            <div>
                                <p class="font-bold text-[10px] sm:text-xs md:text-lg leading-tight">Verified</p>
                                <p
                                    class="text-[8px] sm:text-[10px] md:text-sm text-emerald-100 uppercase tracking-tighter md:normal-case md:tracking-normal">
                                    Gen</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Search Section -->
                <div
                    class="px-4 pt-2 pb-6 md:px-8 md:py-8 flex flex-col justify-center bg-white/5 md:bg-transparent md:backdrop-blur-0">
                    <h2 class="hidden md:block text-xl md:text-2xl font-bold mb-2">Search for Medicines</h2>
                    <p class="hidden md:block text-emerald-50 mb-4">Find trusted pharmacies in your area</p>

                    <!-- Enhanced Search Bar -->
                    <div class="flex gap-4 md:mb-6">
                        <div class="flex-1 relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i
                                    class="fas fa-search text-gray-400 group-focus-within:text-emerald-600 transition-colors"></i>
                            </div>
                            <input type="text" [(ngModel)]="searchTerm" (input)="searchPharmacies()" class="block w-full pl-12 pr-12 py-4 border-0 rounded-xl leading-5 
                                          bg-white/95 backdrop-blur-sm text-gray-900 placeholder-gray-500 
                                          shadow-2xl shadow-emerald-900/20
                                          focus:outline-none focus:ring-4 focus:ring-emerald-300/50
                                          transition-all duration-300 text-base"
                                placeholder="Search by name, city, state...">
                            <button *ngIf="searchTerm" (click)="clearSearch()"
                                class="absolute inset-y-0 right-0 pr-4 flex items-center cursor-pointer group/clear">
                                <i class="fas fa-times-circle text-gray-400 hover:text-red-500 transition-colors"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pharmacies Grid - Full Width, 4 Columns -->
    <div class="w-full px-4 sm:px-6 md:px-8 py-8 md:py-12">
        <!-- Results Header -->
        <div class="mb-8 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div>
                <h2 class="text-2xl font-bold text-gray-900">Available Pharmacies</h2>
                <p class="text-gray-600 mt-1">
                    Showing <span class="font-semibold text-emerald-600">{{filteredPharmacies.length}}</span>
                    of <span class="font-semibold">{{pharmacies.length}}</span> pharmacies
                </p>
            </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <div *ngFor="let i of [1,2,3,4,5,6,7,8]"
                class="bg-white rounded-2xl shadow-lg overflow-hidden animate-pulse">
                <div class="h-44 sm:h-56 bg-gradient-to-br from-gray-200 to-gray-300"></div>
                <div class="p-4 sm:p-6 space-y-4">
                    <div class="h-6 bg-gray-200 rounded w-3/4"></div>
                    <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                    <div class="space-y-2">
                        <div class="h-3 bg-gray-200 rounded"></div>
                        <div class="h-3 bg-gray-200 rounded w-5/6"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pharmacy Cards - Responsive Columns -->
        <div *ngIf="!loading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
            <app-pharmacy-card *ngFor="let pharmacy of filteredPharmacies" [pharmacy]="pharmacy"></app-pharmacy-card>
        </div>
    </div>

    <!-- No Results -->
    <div *ngIf="!loading && filteredPharmacies.length === 0" class="text-center py-20 bg-white rounded-2xl shadow-lg">
        <div class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-gray-100 mb-6">
            <i class="fas fa-pills text-gray-400 text-5xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-2">No pharmacies found</h3>
        <p class="text-gray-500 mb-6">Try adjusting your search criteria</p>
        <button (click)="clearSearch()" class="px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg 
                           transition-colors shadow-lg">
            Clear Search
        </button>
    </div>
</div>