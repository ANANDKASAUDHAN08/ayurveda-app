<div class="flex flex-col min-h-screen bg-gray-50">
  <!-- Offline Indicator -->
  <app-offline-indicator></app-offline-indicator>

  <!-- Top Navbar -->
  <app-top-navbar *ngIf="!isVideoCallRoute" [onMenuToggle]="toggleHamburgerMenu"></app-top-navbar>

  <!-- Hamburger Menu -->
  <app-hamburger-menu *ngIf="!isVideoCallRoute" [isOpen]="hamburgerMenuOpen"
    (close)="closeHamburgerMenu()"></app-hamburger-menu>

  <!-- Main Content -->
  <main class="flex-1">
    <router-outlet></router-outlet>
  </main>

  <!-- Footer (hide on admin routes and video calls) -->
  <app-footer *ngIf="!isAdminRoute && !isVideoCallRoute"></app-footer>

  <!-- Bottom Navigation (Mobile only) -->
  <app-bottom-navigation *ngIf="!isVideoCallRoute" (navItemClicked)="closeHamburgerMenu()"></app-bottom-navigation>

  <!-- Snackbar -->
  <app-snackbar></app-snackbar>

  <!-- FAB Menu (Mobile only) -->
  <!-- <app-fab-menu (actionClicked)="handleFabAction($event)"></app-fab-menu> -->

  <!-- Scroll to Top Button -->
  <app-scroll-to-top *ngIf="!isVideoCallRoute"></app-scroll-to-top>

  <!-- Location Bottom Sheet -->
  <app-location-bottom-sheet [isOpen]="isLocationSheetOpen" (closeRequested)="locationService.toggleBottomSheet(false)">
  </app-location-bottom-sheet>

  <!-- Global Map Modal -->
  <app-location-map-modal *ngIf="mapsLoaded$ | async" [isOpen]="showMapModal"
    [initialLocation]="locationService.getCurrentLocation()" (modalClosed)="locationService.toggleMap(false)"
    (locationSelected)="onLocationFromMap($event)">
  </app-location-map-modal>

  <!-- AI Chatbot (Global) -->
  <app-chatbot *ngIf="!isVideoCallRoute"></app-chatbot>

  <!-- PWA Update Notification -->
  <app-update-notification *ngIf="showUpdateNotification" (update)="onUpdateApp()" (dismiss)="onDismissUpdate()">
  </app-update-notification>

  <!-- Location Permission Dialog -->
  <app-location-permission-dialog *ngIf="showLocationPermissionDialog">
  </app-location-permission-dialog>

  <!-- Logout Confirmation Dialog -->
  <app-logout-confirmation [isOpen]="showLogoutConfirmation" (confirm)="onLogoutConfirm()" (cancel)="onLogoutCancel()">
  </app-logout-confirmation>
</div>