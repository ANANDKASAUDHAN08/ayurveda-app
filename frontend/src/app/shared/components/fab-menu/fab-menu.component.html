<!-- Backdrop -->
<div *ngIf="isOpen" @backdrop (click)="closeMenu()"
    class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[998] md:hidden">
</div>

<!-- FAB Menu Container -->
<div class="fixed bottom-20 right-4 z-[999] md:hidden">
    <!-- Action Buttons (appear when open) -->
    <div *ngIf="isOpen" class="flex flex-col-reverse gap-3 mb-4">
        <button *ngFor="let action of actions; let i = index" @menuItem [style.animation-delay]="i * 50 + 'ms'"
            (click)="onActionClick(action.action)" class="group flex items-center gap-3 transition-all active:scale-95">

            <!-- Label (appears on left) -->
            <span class="bg-white text-gray-900 px-4 py-2 rounded-full shadow-lg text-sm font-medium whitespace-nowrap">
                {{ action.label }}
            </span>

            <!-- Icon Button -->
            <div
                [class]="action.color + ' w-12 h-12 rounded-full shadow-xl flex items-center justify-center text-white transform group-active:scale-90 transition-transform'">
                <i [class]="'fas ' + action.icon + ' text-lg'"></i>
            </div>
        </button>
    </div>

    <!-- Main FAB Button -->
    <button (click)="toggleMenu()" [@fabToggle]="isOpen ? 'open' : 'closed'"
        class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full shadow-2xl flex items-center justify-center text-white hover:shadow-emerald-500/50 active:scale-95 transition-all ring-4 ring-white/50">
        <i class="fas fa-plus text-2xl"></i>
    </button>

    <!-- Ripple effect -->
    <div *ngIf="isOpen"
        class="absolute inset-0 rounded-full bg-emerald-400 animate-ping opacity-20 pointer-events-none">
    </div>
</div>