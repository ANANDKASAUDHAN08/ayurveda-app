<div *ngIf="isVisible">
    <!-- COMPACT MODE: Simple progress bar with inline requirements -->
    <div *ngIf="mode === 'compact'" class="space-y-2">
        <!-- Strength Bar -->
        <div class="space-y-1">
            <div class="flex items-center justify-between">
                <span class="text-xs font-semibold text-gray-700">Password Strength</span>
                <span class="text-xs font-bold" [ngClass]="{
                    'text-red-600': getStrengthPercentage() < 40,
                    'text-yellow-600': getStrengthPercentage() >= 40 && getStrengthPercentage() < 70,
                    'text-blue-600': getStrengthPercentage() >= 70 && getStrengthPercentage() < 100,
                    'text-emerald-600': getStrengthPercentage() === 100
                }">{{ getStrengthLabel() }}</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
                <div class="h-2 rounded-full transition-all duration-300" [ngClass]="getStrengthColor()"
                    [style.width.%]="getStrengthPercentage()"></div>
            </div>
        </div>

        <!-- Inline Requirements -->
        <div class="flex flex-wrap gap-x-3 gap-y-1 text-xs">
            <div class="flex items-center gap-1">
                <i [class]="requirements.minLength ? 'fas fa-check text-emerald-600' : 'fas fa-circle text-gray-300'"
                    class="text-[10px]"></i>
                <span [class.text-emerald-600]="requirements.minLength"
                    [class.text-gray-500]="!requirements.minLength">8+ chars</span>
            </div>
            <div class="flex items-center gap-1">
                <i [class]="requirements.hasUppercase ? 'fas fa-check text-emerald-600' : 'fas fa-circle text-gray-300'"
                    class="text-[10px]"></i>
                <span [class.text-emerald-600]="requirements.hasUppercase"
                    [class.text-gray-500]="!requirements.hasUppercase">Uppercase</span>
            </div>
            <div class="flex items-center gap-1">
                <i [class]="requirements.hasLowercase ? 'fas fa-check text-emerald-600' : 'fas fa-circle text-gray-300'"
                    class="text-[10px]"></i>
                <span [class.text-emerald-600]="requirements.hasLowercase"
                    [class.text-gray-500]="!requirements.hasLowercase">Lowercase</span>
            </div>
            <div class="flex items-center gap-1">
                <i [class]="requirements.hasNumber ? 'fas fa-check text-emerald-600' : 'fas fa-circle text-gray-300'"
                    class="text-[10px]"></i>
                <span [class.text-emerald-600]="requirements.hasNumber"
                    [class.text-gray-500]="!requirements.hasNumber">Number</span>
            </div>
            <div class="flex items-center gap-1">
                <i [class]="requirements.hasSpecial ? 'fas fa-check text-emerald-600' : 'fas fa-circle text-gray-300'"
                    class="text-[10px]"></i>
                <span [class.text-emerald-600]="requirements.hasSpecial"
                    [class.text-gray-500]="!requirements.hasSpecial">Special</span>
            </div>
        </div>
    </div>

    <!-- DETAILED MODE: Original dropdown style -->
    <div *ngIf="mode === 'detailed'" class="relative w-full mt-1 z-50">
        <div class="bg-white/80 backdrop-blur-xl rounded-lg shadow-2xl border border-white/60 p-3 space-y-2">
            <!-- Strength Bar -->
            <div class="space-y-1 bg-white/70 backdrop-blur-md rounded-md p-2.5 shadow-sm">
                <div class="flex items-center justify-between">
                    <span class="text-xs font-semibold text-gray-800 drop-shadow-sm">Password Strength</span>
                    <span class="text-xs font-bold drop-shadow-sm" [ngClass]="{
                        'text-red-700': getStrengthPercentage() < 40,
                        'text-yellow-700': getStrengthPercentage() >= 40 && getStrengthPercentage() < 70,
                        'text-blue-700': getStrengthPercentage() >= 70 && getStrengthPercentage() < 100,
                        'text-emerald-700': getStrengthPercentage() === 100
                    }">{{ getStrengthLabel() }}</span>
                </div>
                <div class="w-full bg-gray-300 rounded-full h-2.5 shadow-inner">
                    <div class="h-2.5 rounded-full transition-all duration-300 shadow-sm" [ngClass]="getStrengthColor()"
                        [style.width.%]="getStrengthPercentage()"></div>
                </div>
            </div>

            <!-- Requirements Checklist -->
            <div class="bg-white/70 backdrop-blur-md rounded-lg p-3 border border-white/50 shadow-sm">
                <p class="text-xs font-bold text-gray-800 mb-2 drop-shadow-sm">Password must contain:</p>

                <!-- Desktop: Full Layout -->
                <div class="hidden sm:grid sm:grid-cols-2 gap-1.5">
                    <div class="flex items-center gap-1.5">
                        <i [class]="requirements.minLength ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-xs"></i>
                        <span class="text-xs" [class.text-emerald-600]="requirements.minLength"
                            [class.text-gray-500]="!requirements.minLength">
                            At least 8 characters
                        </span>
                    </div>

                    <div class="flex items-center gap-1.5">
                        <i [class]="requirements.hasUppercase ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-xs"></i>
                        <span class="text-xs" [class.text-emerald-600]="requirements.hasUppercase"
                            [class.text-gray-500]="!requirements.hasUppercase">
                            One uppercase letter
                        </span>
                    </div>

                    <div class="flex items-center gap-1.5">
                        <i [class]="requirements.hasLowercase ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-xs"></i>
                        <span class="text-xs" [class.text-emerald-600]="requirements.hasLowercase"
                            [class.text-gray-500]="!requirements.hasLowercase">
                            One lowercase letter
                        </span>
                    </div>

                    <div class="flex items-center gap-1.5">
                        <i [class]="requirements.hasNumber ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-xs"></i>
                        <span class="text-xs" [class.text-emerald-600]="requirements.hasNumber"
                            [class.text-gray-500]="!requirements.hasNumber">
                            One number
                        </span>
                    </div>

                    <div class="flex items-center gap-1.5" style="grid-column: span 2;">
                        <i [class]="requirements.hasSpecial ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-xs"></i>
                        <span class="text-xs" [class.text-emerald-600]="requirements.hasSpecial"
                            [class.text-gray-500]="!requirements.hasSpecial">
                            One special character (!&#64;#$%^&*)
                        </span>
                    </div>
                </div>

                <!-- Mobile: Compact Layout -->
                <div class="grid grid-cols-2 gap-1.5 sm:hidden">
                    <div class="flex items-center gap-1">
                        <i [class]="requirements.minLength ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-[10px]"></i>
                        <span class="text-[10px]" [class.text-emerald-600]="requirements.minLength"
                            [class.text-gray-500]="!requirements.minLength">
                            8+ chars
                        </span>
                    </div>

                    <div class="flex items-center gap-1">
                        <i [class]="requirements.hasUppercase ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-[10px]"></i>
                        <span class="text-[10px]" [class.text-emerald-600]="requirements.hasUppercase"
                            [class.text-gray-500]="!requirements.hasUppercase">
                            Uppercase
                        </span>
                    </div>

                    <div class="flex items-center gap-1">
                        <i [class]="requirements.hasLowercase ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-[10px]"></i>
                        <span class="text-[10px]" [class.text-emerald-600]="requirements.hasLowercase"
                            [class.text-gray-500]="!requirements.hasLowercase">
                            Lowercase
                        </span>
                    </div>

                    <div class="flex items-center gap-1">
                        <i [class]="requirements.hasNumber ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-[10px]"></i>
                        <span class="text-[10px]" [class.text-emerald-600]="requirements.hasNumber"
                            [class.text-gray-500]="!requirements.hasNumber">
                            Number
                        </span>
                    </div>

                    <div class="flex items-center gap-1" style="grid-column: span 2;">
                        <i [class]="requirements.hasSpecial ? 'fas fa-check-circle text-emerald-600' : 'fas fa-circle text-gray-300'"
                            class="text-[10px]"></i>
                        <span class="text-[10px]" [class.text-emerald-600]="requirements.hasSpecial"
                            [class.text-gray-500]="!requirements.hasSpecial">
                            Special (!&#64;#$%)
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>